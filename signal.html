<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CandleLogic AI – Signal Generator</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #0f1116;
      color: #fff;
      margin: 0;
      padding: 20px;
    }

    .container {
      max-width: 600px;
      margin: auto;
      background: #1c1f26;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.5);
    }

    h1 {
      text-align: center;
      color: #00ffd5;
    }

    select, button {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 6px;
      border: none;
      font-size: 16px;
    }

    .candle-inputs {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-bottom: 10px;
    }

    .candle-select {
      padding: 8px;
      border-radius: 5px;
      background: #2b2f3a;
      color: #fff;
      border: 1px solid #444;
    }

    .generate-btn {
      background-color: #00ffd5;
      color: #000;
      font-weight: bold;
      cursor: pointer;
    }

    .generate-btn:disabled {
      background-color: #888;
      cursor: not-allowed;
    }

    .signal-output {
      background: #13171e;
      padding: 20px;
      margin-top: 20px;
      border-radius: 10px;
      box-shadow: inset 0 0 10px #000;
    }

    .signal-output p {
      font-size: 16px;
      margin: 8px 0;
    }

    .signal-output .valid {
      color: #00ff88;
    }

    .signal-output .invalid {
      color: #ff4d4d;
    }

    .copy-btn {
      margin-top: 10px;
      padding: 10px;
      background: #00ffd5;
      color: #000;
      font-weight: bold;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    .copy-btn:active {
      background: #00ccaa;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>CandleLogic AI</h1>

    <!-- Market & Pair Section -->
    <select id="marketType">
      <option>Binary Market</option>
      <option>OTC Market</option>
      <option>Real Market</option>
    </select>

    <select id="pairSelect">
      <option>EUR/USD</option>
      <option>GBP/USD</option>
      <option>USD/JPY</option>
      <option>BTC/USD</option>
    </select>

    <select id="timezoneSelect">
      <option value="+6">GMT+6 (Bangladesh)</option>
      <option value="+5">GMT+5</option>
      <option value="+7">GMT+7</option>
    </select>

    <!-- Candle Input -->
    <div class="candle-inputs" id="candleInputs">
      <select class="candle-select"><option value="green">🟢 Green</option><option value="red">🔴 Red</option></select>
      <select class="candle-select"><option value="green">🟢 Green</option><option value="red">🔴 Red</option></select>
      <select class="candle-select"><option value="green">🟢 Green</option><option value="red">🔴 Red</option></select>
      <select class="candle-select"><option value="green">🟢 Green</option><option value="red">🔴 Red</option></select>
      <select class="candle-select" id="runningCandle"><option value="green">🟢 Green</option><option value="red">🔴 Red</option></select>
    </div>

    <button id="generateBtn" class="generate-btn">Generate Signal</button>

    <div class="signal-output" id="signalOutput" style="display:none;"></div>
  </div>

  <script>
    const generateBtn = document.getElementById('generateBtn');
    const outputDiv = document.getElementById('signalOutput');

    function formatTime(date) {
      return `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;
    }

    generateBtn.addEventListener('click', () => {
      const selects = document.querySelectorAll('.candle-select');
      const candles = Array.from(selects).slice(0, 4).map(s => s.value);
      const lastCandle = selects[4].value;

      const greenCount = candles.filter(c => c === 'green').length;
      const redCount = candles.filter(c => c === 'red').length;

      const nextTime = new Date();
      nextTime.setMinutes(nextTime.getMinutes() + 1);

      let signal = 'WAIT';
      if (greenCount === 3 && redCount === 1) signal = 'PUT';
      else if (redCount === 3 && greenCount === 1) signal = 'CALL';

      const valid = (signal !== 'WAIT') && (lastCandle !== candles[0]);

      outputDiv.style.display = 'block';
      outputDiv.innerHTML = `
        <p>📡 Signal Type: ${signal === 'CALL' ? '⬆ CALL' : signal === 'PUT' ? '⬇ PUT' : '⏸ WAIT'}</p>
        <p>➡️ Next Candle Time: ${formatTime(nextTime)}</p>
        <p>🟢 Green: ${greenCount}    🔴 Red: ${redCount}</p>
        <p>Running Candle: ${lastCandle === 'green' ? '🟢 GREEN' : '🔴 RED'}</p>
        <p>Status: <span class="${valid ? 'valid' : 'invalid'}">${valid ? '✅ VALID' : '❌ INVALID'}</span></p>
        <p>${valid ? '✅ Matches 1st Step MTG Rule' : '❌ Doesn\'t match 1st Step MTG Rule'}</p>
        <button class="copy-btn" onclick="copySignal()">📋 Copy Signal</button>
      `;
    });

    function copySignal() {
      const text = document.getElementById('signalOutput').innerText;
      navigator.clipboard.writeText(text);
      alert("Signal copied!");
    }
  </script>
</body>
</html>
